# AutoAnki Open (Lite)

å¼€æºç²¾ç®€ç‰ˆï¼Œä¿ç•™äº† **AI åˆ¶å¡ + é¢„è§ˆç¼–è¾‘ + APKG å¯¼å‡º** çš„æ ¸å¿ƒèƒ½åŠ›ï¼Œç§»é™¤äº†è´¦å·ã€æ”¯ä»˜ã€æ•°æ®åº“ç­‰é—­æºä¾èµ–ï¼Œå¹¶æ–°å¢å¤šæ¨¡å‹/å‚å•†è‡ªå®šä¹‰å…¥å£ã€‚

## ç‰¹æ€§
- ğŸ¯ è¾“å…¥å­¦ä¹ ææ–™ï¼Œä¸€é”®ç”Ÿæˆ Anki å¡ç‰‡ï¼Œæ”¯æŒç¼–è¾‘ä¸åˆ†é¡µé¢„è§ˆ  
- ğŸ”Œ å‰ç«¯å³å¯é€‰æ‹© AI å‚å•† / æ¨¡å‹ï¼Œè‡ªå®šä¹‰ Base URLï¼ˆé€‚é…ä»£ç†æˆ–è‡ªå»ºç½‘å…³ï¼‰  
- ğŸ—ï¸ API Key å¿…é¡»åœ¨é¡µé¢è¾“å…¥ï¼ˆåªéšå½“æ¬¡è¯·æ±‚å‘é€ï¼Œä¸ä¼šä¿å­˜åˆ°æœåŠ¡å™¨æˆ–æµè§ˆå™¨ï¼‰  
- ğŸ§³ å¯¼å‡º `.apkg` å¡åŒ…ï¼Œç›´æ¥å¯¼å…¥ Anki ä½¿ç”¨  
- ğŸ§ª å†…ç½®ç¤ºä¾‹æ•°æ®ï¼ˆè¯·æ±‚æ—¶å¯ä¼  `demoMode: true` ä½“éªŒï¼‰

## å¿«é€Ÿå¼€å§‹
1) **ç¯å¢ƒ**ï¼šNode.js 18+  
2) **å®‰è£…ä¾èµ–**ï¼ˆéœ€è¦è”ç½‘æˆ–æœ¬åœ° npm ç¼“å­˜ï¼‰  
```bash
npm install
```
> å¦‚æœä½ åœ¨ç¦»çº¿/å—é™ç¯å¢ƒï¼Œè¯·è‡ªè¡Œå‡†å¤‡ npm ç¼“å­˜ï¼Œæˆ–åœ¨æœ‰ç½‘ç¯å¢ƒç”Ÿæˆ `package-lock.json` åå†å¤åˆ¶ã€‚

3) **å¯åŠ¨ï¼ˆå¿…é¡»åœ¨é¡µé¢å¡«å†™ API Keyï¼‰**
```bash
npm start
# æµè§ˆå™¨è®¿é—® http://localhost:3000
```
> å¦‚éœ€ä¿®æ”¹é»˜è®¤ Base URL / æ¨¡å‹ï¼Œå¯ä»¥å¤åˆ¶ `.env.example` ä¸º `.env` åè°ƒæ•´ç›¸åº”å˜é‡ï¼›API Key ä¸ä¼šä»æœåŠ¡å™¨æ³¨å…¥ï¼Œéœ€åœ¨é¡µé¢å¡«å†™ã€‚

4) **å¿…å¡«é¡¹**
- æ‰“å¼€é¦–é¡µåï¼Œå…ˆé€‰â€œå‚å•†â€ï¼Œå†é€‰â€œæ¨¡å‹â€ï¼Œåœ¨â€œAPI Keyâ€æ¡†ä¸­ç²˜è´´ä½ è‡ªå·±çš„å¯†é’¥ï¼Œå¦åˆ™æ— æ³•è°ƒç”¨ã€‚
- æŒ‰ä½ Shift ç‚¹å‡»â€œåˆ¶å¡â€å¯ä½¿ç”¨æœ¬åœ°å†…ç½®ç¤ºä¾‹æ•°æ®ï¼ŒéªŒè¯ UI æµç¨‹ã€‚

## é¦–é¡µæ¨¡å‹é€‰æ‹©ï¼ˆé»˜è®¤é…ç½®ï¼‰
| å‚å•† | Base URL | ç¤ºä¾‹æ¨¡å‹ |
| --- | --- | --- |
| OpenAI | https://api.openai.com/v1 | gpt-4o-mini / gpt-4o / gpt-4-turbo / gpt-3.5-turbo |
| Claude | https://api.anthropic.com | claude-3-5-sonnet-20241022 / claude-3-opus-20240229 / claude-3-5-haiku-latest |
| Gemini | https://generativelanguage.googleapis.com/v1beta | gemini-1.5-pro-002 / gemini-1.5-flash-002 / gemini-1.5-flash-8b |
| DeepSeek | https://api.deepseek.com/v1 | deepseek-chat / deepseek-reasoner |
| Qwen (DashScopeå…¼å®¹) | https://dashscope.aliyuncs.com/compatible-mode/v1 | qwen-turbo / qwen-plus / qwen-max |

åœ¨é¡µé¢å¯ç›´æ¥åˆ‡æ¢å‚å•†ã€æ‰‹åŠ¨è¦†ç›–æ¨¡å‹åä¸ Base URLï¼›API Key ä¸ä¼šè¢«ä¿å­˜ï¼ˆä»…éšæœ¬æ¬¡è¯·æ±‚å‘é€ï¼‰ã€‚

## ä¸åŸç‰ˆçš„åŒºåˆ«
- åˆ é™¤ï¼šç”¨æˆ·ç³»ç»Ÿã€ç§¯åˆ†/æ”¯ä»˜ã€æ•°æ®åº“è¯»å†™ã€PayPal/å¾®ä¿¡/æ”¯ä»˜å®ç­‰æ”¯ä»˜é€»è¾‘  
- åˆ é™¤ï¼šè´¦å·ç›¸å…³å‰ç«¯é¡µé¢ä¸æ¥å£ï¼ˆauth / user-center / payment ç›®å½•ç­‰ï¼‰  
- æ–°å¢ï¼šå¤šå‚å•†é€‰æ‹©é¢æ¿ã€è‡ªå®šä¹‰ Base URLã€å‰ç«¯å¯ä¸´æ—¶å¡«å…¥ API Key  
- ä¿ç•™ï¼šå¡ç‰‡ç”Ÿæˆè§„åˆ™ã€ç¼–è¾‘ä¸å¯¼å‡ºä½“éªŒï¼Œæ•´ä½“ UI/äº¤äº’ä¿æŒä¸€è‡´

## æœ€å°éªŒè¯ï¼ˆç”¨ä½ è‡ªå·±çš„ Keyï¼‰
å¯ç”¨ curl ç›´è¿åç«¯éªŒè¯è°ƒç”¨æ˜¯å¦é€šç•…ï¼ˆæ›¿æ¢ provider/model/baseURL/apiKeyï¼‰ï¼š
```bash
curl -X POST http://localhost:3000/api/generate-cards \
  -H "Content-Type: application/json" \
  -d '{
    "material":"ç®€çŸ­æµ‹è¯•æ–‡æœ¬",
    "cardCount":1,
    "language":"zh",
    "provider":"deepseek",
    "model":"deepseek-chat",
    "baseURL":"https://api.deepseek.com/v1",
    "apiKey":"YOUR_KEY"
  }'
```
è¿”å›åŒ…å« `cards` å³æˆåŠŸï¼›æŠ¥é”™åˆ™ä¼šæœ‰ `error` å­—æ®µã€‚

## ä¸»è¦è„šæœ¬
- `npm start`ï¼šå¯åŠ¨ Express é™æ€ç«™ç‚¹ + API
- `npm run dev`ï¼šä½¿ç”¨ nodemon çƒ­é‡è½½

## ç›®å½•é€Ÿè§ˆ
- `public/`ï¼šå‰ç«¯é¡µé¢ä¸é™æ€èµ„æºï¼ˆé¦–é¡µå…¥å£ï¼š`public/index.html`ï¼‰
- `server.js`ï¼šåç«¯å…¥å£ï¼Œæš´éœ² `/api/generate-cards`ã€`/api/export-apkg`ã€`/api/providers`
- `.env.example`ï¼šç¤ºä¾‹ç¯å¢ƒå˜é‡ï¼ˆå¤šå‚å•†æ”¯æŒï¼‰

## å¸¸è§é—®é¢˜
- **åªèƒ½ç”¨åˆ—è¡¨é‡Œçš„æ¨¡å‹å—ï¼Ÿ** å½“å‰å‰ç«¯å¼ºåˆ¶ä½¿ç”¨ä¸‹æ‹‰åˆ—è¡¨ï¼Œé¿å…è¯¯å¡«ä¸å¯ç”¨æ¨¡å‹ã€‚å¦‚éœ€æ‰©å……å¯åœ¨ `server.js` çš„ `PROVIDERS` ä¸­è¿½åŠ ç¨³å®šå¯è°ƒçš„æ¨¡å‹åã€‚  
- **ä¸ºä»€ä¹ˆæ²¡æœ‰é»˜è®¤å¯†é’¥ï¼Ÿ** å‡ºäºå®‰å…¨è€ƒè™‘ï¼ŒæœåŠ¡å™¨ä¸æ³¨å…¥ä»»ä½•å¯†é’¥ï¼Œå¿…é¡»åœ¨å‰ç«¯æ‰‹å¡«ã€‚  
- **æç¤º 401/403ï¼Ÿ** æ£€æŸ¥ Key æ˜¯å¦æœ‰æ•ˆã€å¯¹åº” Base URL/æ¨¡å‹æ˜¯å¦åŒ¹é…å‚å•†è¦æ±‚ã€‚  
- **è°ƒç”¨ç¼“æ…¢æˆ–å¤±è´¥ï¼Ÿ** å¯åœ¨ Base URL ä¸­æ”¹ä¸ºä½ çš„ä»£ç†/ç½‘å…³ï¼›æˆ–å…ˆç”¨ Shift+åˆ¶å¡éªŒè¯å‰ç«¯æµç¨‹ã€‚

## è´¡çŒ®
æ¬¢è¿æäº¤ Issue / PRï¼Œä¸€èµ·å®Œå–„æ›´å¤šæ¨¡å‹é€‚é…å’Œéƒ¨ç½²æ–¹å¼ã€‚***
