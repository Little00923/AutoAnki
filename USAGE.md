# AutoAnki 使用指南

## 快速开始

### 1. 环境准备

确保已安装 Node.js (建议 v14 或更高版本)

### 2. 安装依赖

```bash
npm install
```

### 3. 配置API密钥

复制 `.env.example` 文件为 `.env`：

```bash
copy .env.example .env
```

编辑 `.env` 文件，填入你的API密钥：

```env
OPENAI_API_KEY=你的API密钥
OPENAI_BASE_URL=https://api.openai.com/v1
OPENAI_MODEL=gpt-3.5-turbo
```

#### 支持的API服务

**OpenAI**
```env
OPENAI_API_KEY=sk-...
OPENAI_BASE_URL=https://api.openai.com/v1
OPENAI_MODEL=gpt-3.5-turbo
```

**DeepSeek（推荐，性价比高）**
```env
OPENAI_API_KEY=sk-...
OPENAI_BASE_URL=https://api.deepseek.com/v1
OPENAI_MODEL=deepseek-chat
```

**智谱AI**
```env
OPENAI_API_KEY=...
OPENAI_BASE_URL=https://open.bigmodel.cn/api/paas/v4
OPENAI_MODEL=glm-4
```

### 4. 启动服务

```bash
npm start
```

### 5. 访问应用

打开浏览器访问：http://localhost:3000

## 使用流程

### 步骤1：输入学习材料

1. 在文本框中输入或粘贴你要学习的材料
2. 设置要生成的卡片数量（1-100张）
3. 点击"制卡"按钮

**示例材料：**
```
光合作用是绿色植物利用光能，将二氧化碳和水转化为有机物，并释放氧气的过程。
它包括光反应和暗反应两个阶段。光反应发生在类囊体膜上，需要光能；
暗反应发生在叶绿体基质中，不需要光能但需要光反应的产物ATP和NADPH。
```

### 步骤2：预览和编辑卡片

1. 等待AI生成卡片（通常需要5-30秒）
2. 在预览页面查看生成的卡片
3. 点击"编辑"按钮修改卡片内容
4. 点击"保存"按钮保存修改
5. 使用底部分页浏览所有卡片

### 步骤3：导出卡包

1. 确认卡片内容无误后，点击"导出"按钮
2. 浏览器会自动下载 `.apkg` 文件
3. 将文件导入Anki使用

## 在Anki中导入卡包

1. 打开Anki应用
2. 点击 `文件` → `导入`
3. 选择下载的 `.apkg` 文件
4. 确认导入设置，点击"导入"
5. 开始学习！

## 卡片类型说明

应用会自动生成4种类型的卡片：

### 1. 基础问答卡 (basic_qa)
- **用途**：测试核心定义和基础事实
- **示例**：
  - 正面：什么是光合作用？
  - 背面：绿色植物利用光能，将二氧化碳和水转化为有机物，并释放氧气的过程

### 2. 填空卡 (cloze)
- **用途**：记忆关键术语和概念
- **示例**：
  - 光合作用中，绿色植物利用{{c1::光能}}，将{{c1::二氧化碳}}和{{c1::水}}转化为有机物

### 3. 枚举卡 (enumeration)
- **用途**：记忆列表和分类
- **示例**：
  - 正面：光合作用包括哪两个主要阶段？
  - 背面：光反应和暗反应

### 4. 上下文问答卡 (contextual_qa)
- **用途**：测试理解和应用
- **示例**：
  - 正面：为什么暗反应不需要光但仍依赖光反应？
  - 背面：因为暗反应需要光反应产生的ATP和NADPH作为能量和还原力来源

## 技巧和建议

### 优化材料输入

1. **适当的长度**：建议每次输入200-1000字的学习材料
2. **清晰的结构**：使用分段和要点，帮助AI更好地识别概念
3. **完整的信息**：确保材料包含完整的定义、解释和例子

### 卡片数量建议

- 短文本（<300字）：5-10张卡片
- 中等文本（300-800字）：10-20张卡片
- 长文本（>800字）：20-50张卡片

### 编辑卡片

- 检查是否有表述不清的地方
- 可以添加个人理解和记忆提示
- 确保问题和答案一一对应

### 学习建议

- 每天复习，利用Anki的间隔重复算法
- 对于难记的卡片，可以添加图片或助记符
- 定期回顾和更新卡片内容

## 常见问题

### Q1: 生成卡片失败怎么办？

**原因可能是：**
- API密钥未配置或无效
- 网络连接问题
- API配额不足

**解决方法：**
1. 检查 `.env` 文件中的配置
2. 查看浏览器控制台和服务器日志
3. 尝试更换API服务商

### Q2: 生成的卡片质量不高？

**改进方法：**
1. 提供更详细、结构化的学习材料
2. 手动编辑和优化生成的卡片
3. 调整提示词（修改 `server.js` 中的 `SYSTEM_PROMPT`）

### Q3: 导出的文件无法在Anki中打开？

**检查：**
1. 确保下载的文件扩展名是 `.apkg`
2. 使用最新版本的Anki
3. 尝试重新导出

### Q4: 想要使用其他AI模型？

编辑 `.env` 文件，修改以下配置：
```env
OPENAI_BASE_URL=你的API地址
OPENAI_MODEL=模型名称
```

只要API兼容OpenAI的接口格式即可使用。

## 性能优化

### 本地部署建议

- 使用本地AI模型（如Ollama）可以提高速度和隐私性
- 配置示例：
```env
OPENAI_API_KEY=ollama
OPENAI_BASE_URL=http://localhost:11434/v1
OPENAI_MODEL=llama2
```

### 批量生成

如果需要生成大量卡片：
1. 将材料分成多个部分
2. 分批生成和导出
3. 在Anki中合并卡组

## 开发和自定义

### 修改提示词

编辑 `server.js` 中的 `SYSTEM_PROMPT` 变量来自定义AI的行为。

### 调整卡片样式

编辑 `public/style.css` 来自定义界面样式。

### 添加新功能

- 前端逻辑：编辑 `public/app.js`
- 后端API：编辑 `server.js`

## 技术支持

遇到问题？

1. 查看服务器日志
2. 检查浏览器控制台
3. 确认API配置正确
4. 查看 GitHub Issues

## 许可证

MIT License




